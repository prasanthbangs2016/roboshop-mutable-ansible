- name: Install python36 gcc python3-devel
  ansible.builtin.yum:
    name: 
      - python36
      - gcc
      - python3-devel
    state: installed

- name: Include app-pre-setup
  ansible.builtin.include_role:
    name: common
    tasks_from: app-pre-setup

- name: Install python dependencies
  ansible.builtin.pip:
    requirements: /home/roboshop/{{COMPONENT}}/requirements.txt
    executable: pip3
  
- name: Include app-pre-setup
  ansible.builtin.include_role:
    name: common
    tasks_from: systemd
    
- name: Install prometheus node exporter
  ansible.builtin.include_role:
    name: prometheus
    tasks_from: client


- name: create rsyslog configuration
  ansible.builtin.template:
    src: rsyslog.conf
    dest: /etc/rsyslog.d/{{COMPONENT}}.conf
  when: APP_TYPE == "java" or APP_TYPE == "python" or APP_TYPE == "nodejs"

- name: restart rsyslog 
  ansible.builtin.systemd:
    name: rsyslog
    state: restarted
  when: APP_TYPE == "java" or APP_TYPE == "python" or APP_TYPE == "nodejs"


